import { Component, OnInit, Query, Input } from '@angular/core';
import { ImlService } from '../../iml.service';
import { Router } from '@angular/router';
import { DOCUMENT } from '@angular/common';
import { THIS_EXPR } from '@angular/compiler/src/output/output_ast';


@Component({
  selector: 'app-docs',
  templateUrl: './docs.component.html',
  styleUrls: ['./docs.component.css']
})
export class DocsComponent implements OnInit {
  concepts = [];
  finalquery = "";
  relatedConcepts = [];
  documents = [];
  operators = [];
  searching = false;
  adjustedquery: string;
  completed = false;
  example1comp = false;
  example2comp = false;

  constructor(private iml: ImlService,
              private router: Router) { }

  ngOnInit() {
  }
  example2() {
    const example2cuis = ["C0702151", "C0161849", "C0194158", "C0189919", "C0189537", "C0872252", "C0040679", "C0018595", "C0540301", "C0019067",
    "C0003440", "C0016016", "C0002191", "C0020852", "C0020861"];
    this.example2comp = true;
    const conceptsjson= '[{"bool":"Repair of liver","id":"C0702151","ontology":"umls","type":"TherapeuticOrPreventiveProcedure","sections":["abstract"]},{"bool":"Repair of brain","id":"C0161849","ontology":"umls","type":"TherapeuticOrPreventiveProcedure","sections":["abstract"]},{"bool":"Repair of lung","id":"C0189537","ontology":"umls","type":"TherapeuticOrPreventiveProcedure","sections":["abstract"]},{"bool":"Repair of kidney","id":"C0194158","ontology":"umls","type":"TherapeuticOrPreventiveProcedure","sections":["abstract"]},{"bool":"Transferrin","id":"C0040679","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]},{"bool":"C1 esterase inhibitor","id":"C0540301","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]},{"bool":"Antithrombins","id":"C0003440","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]},{"bool":"alpha 1-Antitrypsin","id":"C0002191","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]},{"bool":"Proteomics","id":"C0872252","ontology":"umls","type":"BiomedicalOccupationOrDiscipline","sections":["abstract"]},{"bool":"Immunoglobulin M","id":"C0020861","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]},{"bool":"Immunoglobulin G","id":"C0020852","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]},{"bool":"Hemopexin","id":"C0019067","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]},{"bool":"Repair of heart","id":"C0189919","ontology":"umls","type":"TherapeuticOrPreventiveProcedure","sections":["abstract"]},{"bool":"Plasmin","id":"C0016016","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]},{"bool":"Haptoglobins","id":"C0018595","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]}]';
    this.concepts = JSON.parse(conceptsjson);
    this.adjustedquery = "( Repair of lung OR Repair of liver OR Repair of brain OR Repair of kidney OR Repair of heart) AND Proteomics AND ( Transferrin OR C1 esterase inhibitor OR Haptoglobins OR Hemopexin OR Antithrombins OR Plasmin OR Immunoglobulin G OR alpha 1-Antitrypsin OR Immunoglobulin M )";
    this.iml.query = this.adjustedquery;
    let docsexample2 = '[{"documentId":"25290099%3A%3A4188744%3A%3APONE-D-14-12322%3A%3A10.1371%2Fjournal.pone.0109713","title":"Proteomic Profiles in Acute Respiratory Distress Syndrome Differentiates Survivors from Non-Survivors\n","metadata":{"title":["Proteomic Profiles in Acute Respiratory Distress Syndrome Differentiates Survivors from Non-Survivors\n"]},"corpus":"pubmed","links":{"hrefSearchMatches":"/services/medical_insights/api/v1/corpora/pubmed/documents/25290099%3A%3A4188744%3A%3APONE-D-14-12322%3A%3A10.1371%2Fjournal.pone.0109713/search_matches?version=2020-01-20&cuis=C0702151&cuis=C0161849&cuis=C0189537&cuis=C0194158&cuis=C0040679&cuis=C0540301&cuis=C0003440&cuis=C0002191&cuis=C0872252&cuis=C0020861&cuis=C0020852&cuis=C0019067&cuis=C0189919&cuis=C0016016&cuis=C0018595","hrefCategories":"/services/medical_insights/api/v1/corpora/pubmed/documents/25290099%3A%3A4188744%3A%3APONE-D-14-12322%3A%3A10.1371%2Fjournal.pone.0109713/categories?version=2020-01-20"},"concepts":[{"bool":"Repair of lung","id":"C0189537","ontology":"umls","type":"TherapeuticOrPreventiveProcedure","sections":["abstract"]},{"bool":"Transferrin","id":"C0040679","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]},{"bool":"Antithrombins","id":"C0003440","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]},{"bool":"Proteomics","id":"C0872252","ontology":"umls","type":"BiomedicalOccupationOrDiscipline","sections":["abstract"]},{"bool":"Immunoglobulin M","id":"C0020861","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]},{"bool":"Immunoglobulin G","id":"C0020852","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]},{"bool":"Hemopexin","id":"C0019067","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]},{"bool":"Haptoglobins","id":"C0018595","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]}]},{"documentId":"24070255%3A%3A3979026%3A%3Agm493%3A%3A10.1186%2Fgm493","title":"Serum acute phase reactants hallmark healthy individuals at risk for acetaminophen-induced liver injury\n","metadata":{"title":["Serum acute phase reactants hallmark healthy individuals at risk for acetaminophen-induced liver injury\n"]},"corpus":"pubmed","links":{"hrefSearchMatches":"/services/medical_insights/api/v1/corpora/pubmed/documents/24070255%3A%3A3979026%3A%3Agm493%3A%3A10.1186%2Fgm493/search_matches?version=2020-01-20&cuis=C0702151&cuis=C0161849&cuis=C0189537&cuis=C0194158&cuis=C0040679&cuis=C0540301&cuis=C0003440&cuis=C0002191&cuis=C0872252&cuis=C0020861&cuis=C0020852&cuis=C0019067&cuis=C0189919&cuis=C0016016&cuis=C0018595","hrefCategories":"/services/medical_insights/api/v1/corpora/pubmed/documents/24070255%3A%3A3979026%3A%3Agm493%3A%3A10.1186%2Fgm493/categories?version=2020-01-20"},"concepts":[{"bool":"Repair of liver","id":"C0702151","ontology":"umls","type":"TherapeuticOrPreventiveProcedure","sections":["abstract"]},{"bool":"alpha 1-Antitrypsin","id":"C0002191","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]},{"bool":"Proteomics","id":"C0872252","ontology":"umls","type":"BiomedicalOccupationOrDiscipline","sections":["abstract"]},{"bool":"Immunoglobulin G","id":"C0020852","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]},{"bool":"Hemopexin","id":"C0019067","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]},{"bool":"Plasmin","id":"C0016016","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]},{"bool":"Haptoglobins","id":"C0018595","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]}]},{"documentId":"25967741%3A%3A4408443%3A%3A27783%3A%3A10.3402%2Fjev.v4.27783","title":"Abstracts from the Fourth International Meeting of ISEV, ISEV2015, Washington, D.C., USA, 23-26 April 2015\n","metadata":{"title":["Abstracts from the Fourth International Meeting of ISEV, ISEV2015, Washington, D.C., USA, 23-26 April 2015\n"]},"corpus":"pubmed","links":{"hrefSearchMatches":"/services/medical_insights/api/v1/corpora/pubmed/documents/25967741%3A%3A4408443%3A%3A27783%3A%3A10.3402%2Fjev.v4.27783/search_matches?version=2020-01-20&cuis=C0702151&cuis=C0161849&cuis=C0189537&cuis=C0194158&cuis=C0040679&cuis=C0540301&cuis=C0003440&cuis=C0002191&cuis=C0872252&cuis=C0020861&cuis=C0020852&cuis=C0019067&cuis=C0189919&cuis=C0016016&cuis=C0018595","hrefCategories":"/services/medical_insights/api/v1/corpora/pubmed/documents/25967741%3A%3A4408443%3A%3A27783%3A%3A10.3402%2Fjev.v4.27783/categories?version=2020-01-20"},"concepts":[{"bool":"Repair of kidney","id":"C0194158","ontology":"umls","type":"TherapeuticOrPreventiveProcedure","sections":["abstract"]},{"bool":"Transferrin","id":"C0040679","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]},{"bool":"Antithrombins","id":"C0003440","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]},{"bool":"Proteomics","id":"C0872252","ontology":"umls","type":"BiomedicalOccupationOrDiscipline","sections":["abstract"]},{"bool":"Immunoglobulin M","id":"C0020861","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]},{"bool":"Immunoglobulin G","id":"C0020852","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]},{"bool":"Plasmin","id":"C0016016","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]}]},{"documentId":"5637785%3A%3A1310414%3A%3A10.1080%2F20013078.2017.1310414","title":"Abstract Book: ISEV2017\n","metadata":{"title":["Abstract Book: ISEV2017\n"]},"corpus":"pubmed","links":{"hrefSearchMatches":"/services/medical_insights/api/v1/corpora/pubmed/documents/5637785%3A%3A1310414%3A%3A10.1080%2F20013078.2017.1310414/search_matches?version=2020-01-20&cuis=C0702151&cuis=C0161849&cuis=C0189537&cuis=C0194158&cuis=C0040679&cuis=C0540301&cuis=C0003440&cuis=C0002191&cuis=C0872252&cuis=C0020861&cuis=C0020852&cuis=C0019067&cuis=C0189919&cuis=C0016016&cuis=C0018595","hrefCategories":"/services/medical_insights/api/v1/corpora/pubmed/documents/5637785%3A%3A1310414%3A%3A10.1080%2F20013078.2017.1310414/categories?version=2020-01-20"},"concepts":[{"bool":"Transferrin","id":"C0040679","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]},{"bool":"Proteomics","id":"C0872252","ontology":"umls","type":"BiomedicalOccupationOrDiscipline","sections":["abstract"]},{"bool":"Immunoglobulin M","id":"C0020861","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]},{"bool":"Immunoglobulin G","id":"C0020852","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]},{"bool":"Hemopexin","id":"C0019067","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]},{"bool":"Repair of heart","id":"C0189919","ontology":"umls","type":"TherapeuticOrPreventiveProcedure","sections":["abstract"]}]},{"documentId":"26077418%3A%3A4001129%3A%3A24214%3A%3A10.3402%2Fjev.v3.24214","title":"Abstracts from the Third International Meeting of ISEV 2014 Rotterdam, The Netherlands, April 30th – May 3rd, 2014\n","metadata":{"title":["Abstracts from the Third International Meeting of ISEV 2014 Rotterdam, The Netherlands, April 30th – May 3rd, 2014\n"]},"corpus":"pubmed","links":{"hrefSearchMatches":"/services/medical_insights/api/v1/corpora/pubmed/documents/26077418%3A%3A4001129%3A%3A24214%3A%3A10.3402%2Fjev.v3.24214/search_matches?version=2020-01-20&cuis=C0702151&cuis=C0161849&cuis=C0189537&cuis=C0194158&cuis=C0040679&cuis=C0540301&cuis=C0003440&cuis=C0002191&cuis=C0872252&cuis=C0020861&cuis=C0020852&cuis=C0019067&cuis=C0189919&cuis=C0016016&cuis=C0018595","hrefCategories":"/services/medical_insights/api/v1/corpora/pubmed/documents/26077418%3A%3A4001129%3A%3A24214%3A%3A10.3402%2Fjev.v3.24214/categories?version=2020-01-20"},"concepts":[{"bool":"Repair of kidney","id":"C0194158","ontology":"umls","type":"TherapeuticOrPreventiveProcedure","sections":["abstract"]},{"bool":"Transferrin","id":"C0040679","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]},{"bool":"Antithrombins","id":"C0003440","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]},{"bool":"Proteomics","id":"C0872252","ontology":"umls","type":"BiomedicalOccupationOrDiscipline","sections":["abstract"]},{"bool":"Immunoglobulin M","id":"C0020861","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]},{"bool":"Immunoglobulin G","id":"C0020852","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]}]},{"documentId":"30679658%3A%3A6346100%3A%3A37193%3A%3A10.1038%2Fs41598-018-37193-3","title":"Human pluripotent stem cell-derived alveolar epithelial cells are alternatives for in vitro pulmotoxicity assessment\n","metadata":{"title":["Human pluripotent stem cell-derived alveolar epithelial cells are alternatives for in vitro pulmotoxicity assessment\n"]},"corpus":"pubmed","links":{"hrefSearchMatches":"/services/medical_insights/api/v1/corpora/pubmed/documents/30679658%3A%3A6346100%3A%3A37193%3A%3A10.1038%2Fs41598-018-37193-3/search_matches?version=2020-01-20&cuis=C0702151&cuis=C0161849&cuis=C0189537&cuis=C0194158&cuis=C0040679&cuis=C0540301&cuis=C0003440&cuis=C0002191&cuis=C0872252&cuis=C0020861&cuis=C0020852&cuis=C0019067&cuis=C0189919&cuis=C0016016&cuis=C0018595","hrefCategories":"/services/medical_insights/api/v1/corpora/pubmed/documents/30679658%3A%3A6346100%3A%3A37193%3A%3A10.1038%2Fs41598-018-37193-3/categories?version=2020-01-20"},"concepts":[{"bool":"Repair of lung","id":"C0189537","ontology":"umls","type":"TherapeuticOrPreventiveProcedure","sections":["abstract"]},{"bool":"C1 esterase inhibitor","id":"C0540301","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]},{"bool":"Proteomics","id":"C0872252","ontology":"umls","type":"BiomedicalOccupationOrDiscipline","sections":["abstract"]},{"bool":"Immunoglobulin G","id":"C0020852","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]}]},{"documentId":"27247029%3A%3A4887520%3A%3A31552%3A%3A10.3402%2Fjev.v5.31552","title":"The Fifth International Meeting of ISEV, ISEV2016, Rotterdam, The Netherlands, 4 – 7 May, 2016\n","metadata":{"title":["The Fifth International Meeting of ISEV, ISEV2016, Rotterdam, The Netherlands, 4 – 7 May, 2016\n"]},"corpus":"pubmed","links":{"hrefSearchMatches":"/services/medical_insights/api/v1/corpora/pubmed/documents/27247029%3A%3A4887520%3A%3A31552%3A%3A10.3402%2Fjev.v5.31552/search_matches?version=2020-01-20&cuis=C0702151&cuis=C0161849&cuis=C0189537&cuis=C0194158&cuis=C0040679&cuis=C0540301&cuis=C0003440&cuis=C0002191&cuis=C0872252&cuis=C0020861&cuis=C0020852&cuis=C0019067&cuis=C0189919&cuis=C0016016&cuis=C0018595","hrefCategories":"/services/medical_insights/api/v1/corpora/pubmed/documents/27247029%3A%3A4887520%3A%3A31552%3A%3A10.3402%2Fjev.v5.31552/categories?version=2020-01-20"},"concepts":[{"bool":"Repair of brain","id":"C0161849","ontology":"umls","type":"TherapeuticOrPreventiveProcedure","sections":["abstract"]},{"bool":"Antithrombins","id":"C0003440","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]},{"bool":"Proteomics","id":"C0872252","ontology":"umls","type":"BiomedicalOccupationOrDiscipline","sections":["abstract"]},{"bool":"Immunoglobulin G","id":"C0020852","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]}]},{"documentId":"2798987%3A%3A1239%3A%3A10.1007%2Fs00134-008-1239-9","title":"21st ESICM Annual Congress\n","metadata":{"title":["21st ESICM Annual Congress\n"]},"corpus":"pubmed","links":{"hrefSearchMatches":"/services/medical_insights/api/v1/corpora/pubmed/documents/2798987%3A%3A1239%3A%3A10.1007%2Fs00134-008-1239-9/search_matches?version=2020-01-20&cuis=C0702151&cuis=C0161849&cuis=C0189537&cuis=C0194158&cuis=C0040679&cuis=C0540301&cuis=C0003440&cuis=C0002191&cuis=C0872252&cuis=C0020861&cuis=C0020852&cuis=C0019067&cuis=C0189919&cuis=C0016016&cuis=C0018595","hrefCategories":"/services/medical_insights/api/v1/corpora/pubmed/documents/2798987%3A%3A1239%3A%3A10.1007%2Fs00134-008-1239-9/categories?version=2020-01-20"},"concepts":[{"bool":"Repair of lung","id":"C0189537","ontology":"umls","type":"TherapeuticOrPreventiveProcedure","sections":["abstract"]},{"bool":"Antithrombins","id":"C0003440","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]},{"bool":"Proteomics","id":"C0872252","ontology":"umls","type":"BiomedicalOccupationOrDiscipline","sections":["abstract"]},{"bool":"Immunoglobulin G","id":"C0020852","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]}]},{"documentId":"5323391%3A%3A10.3389%2Ffcvm.2017.00007","title":"New Delivery Systems of Stem Cells for Vascular Regeneration in Ischemia\n","metadata":{"title":["New Delivery Systems of Stem Cells for Vascular Regeneration in Ischemia\n"]},"corpus":"pubmed","links":{"hrefSearchMatches":"/services/medical_insights/api/v1/corpora/pubmed/documents/5323391%3A%3A10.3389%2Ffcvm.2017.00007/search_matches?version=2020-01-20&cuis=C0702151&cuis=C0161849&cuis=C0189537&cuis=C0194158&cuis=C0040679&cuis=C0540301&cuis=C0003440&cuis=C0002191&cuis=C0872252&cuis=C0020861&cuis=C0020852&cuis=C0019067&cuis=C0189919&cuis=C0016016&cuis=C0018595","hrefCategories":"/services/medical_insights/api/v1/corpora/pubmed/documents/5323391%3A%3A10.3389%2Ffcvm.2017.00007/categories?version=2020-01-20"},"concepts":[{"bool":"Proteomics","id":"C0872252","ontology":"umls","type":"BiomedicalOccupationOrDiscipline","sections":["abstract"]},{"bool":"Repair of heart","id":"C0189919","ontology":"umls","type":"TherapeuticOrPreventiveProcedure","sections":["abstract"]},{"bool":"Plasmin","id":"C0016016","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]}]},{"documentId":"27171116%3A%3A4882481%3A%3A10.3390%2Fjcm5050052%3A%3Ajcm-05-00052","title":"MicroRNAs in the Evaluation and Potential Treatment of Liver Diseases\n","metadata":{"title":["MicroRNAs in the Evaluation and Potential Treatment of Liver Diseases\n"]},"corpus":"pubmed","links":{"hrefSearchMatches":"/services/medical_insights/api/v1/corpora/pubmed/documents/27171116%3A%3A4882481%3A%3A10.3390%2Fjcm5050052%3A%3Ajcm-05-00052/search_matches?version=2020-01-20&cuis=C0702151&cuis=C0161849&cuis=C0189537&cuis=C0194158&cuis=C0040679&cuis=C0540301&cuis=C0003440&cuis=C0002191&cuis=C0872252&cuis=C0020861&cuis=C0020852&cuis=C0019067&cuis=C0189919&cuis=C0016016&cuis=C0018595","hrefCategories":"/services/medical_insights/api/v1/corpora/pubmed/documents/27171116%3A%3A4882481%3A%3A10.3390%2Fjcm5050052%3A%3Ajcm-05-00052/categories?version=2020-01-20"},"concepts":[{"bool":"Repair of liver","id":"C0702151","ontology":"umls","type":"TherapeuticOrPreventiveProcedure","sections":["abstract"]},{"bool":"alpha 1-Antitrypsin","id":"C0002191","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]},{"bool":"Proteomics","id":"C0872252","ontology":"umls","type":"BiomedicalOccupationOrDiscipline","sections":["abstract"]}]},{"documentId":"24915963%3A%3A4229780%3A%3Ascrt465%3A%3A10.1186%2Fscrt465","title":"Mesenchymal stem cell-derived exosomes promote hepatic regeneration in drug-induced liver injury models\n","metadata":{"title":["Mesenchymal stem cell-derived exosomes promote hepatic regeneration in drug-induced liver injury models\n"]},"corpus":"pubmed","links":{"hrefSearchMatches":"/services/medical_insights/api/v1/corpora/pubmed/documents/24915963%3A%3A4229780%3A%3Ascrt465%3A%3A10.1186%2Fscrt465/search_matches?version=2020-01-20&cuis=C0702151&cuis=C0161849&cuis=C0189537&cuis=C0194158&cuis=C0040679&cuis=C0540301&cuis=C0003440&cuis=C0002191&cuis=C0872252&cuis=C0020861&cuis=C0020852&cuis=C0019067&cuis=C0189919&cuis=C0016016&cuis=C0018595","hrefCategories":"/services/medical_insights/api/v1/corpora/pubmed/documents/24915963%3A%3A4229780%3A%3Ascrt465%3A%3A10.1186%2Fscrt465/categories?version=2020-01-20"},"concepts":[{"bool":"Repair of liver","id":"C0702151","ontology":"umls","type":"TherapeuticOrPreventiveProcedure","sections":["abstract"]},{"bool":"Transferrin","id":"C0040679","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]},{"bool":"Proteomics","id":"C0872252","ontology":"umls","type":"BiomedicalOccupationOrDiscipline","sections":["abstract"]}]},{"documentId":"25055032%3A%3A4108384%3A%3APONE-D-13-49764%3A%3A10.1371%2Fjournal.pone.0103185","title":"Proteomic Characterization of Acyclovir-Induced Nephrotoxicity in a Mouse Model\n","metadata":{"title":["Proteomic Characterization of Acyclovir-Induced Nephrotoxicity in a Mouse Model\n"]},"corpus":"pubmed","links":{"hrefSearchMatches":"/services/medical_insights/api/v1/corpora/pubmed/documents/25055032%3A%3A4108384%3A%3APONE-D-13-49764%3A%3A10.1371%2Fjournal.pone.0103185/search_matches?version=2020-01-20&cuis=C0702151&cuis=C0161849&cuis=C0189537&cuis=C0194158&cuis=C0040679&cuis=C0540301&cuis=C0003440&cuis=C0002191&cuis=C0872252&cuis=C0020861&cuis=C0020852&cuis=C0019067&cuis=C0189919&cuis=C0016016&cuis=C0018595","hrefCategories":"/services/medical_insights/api/v1/corpora/pubmed/documents/25055032%3A%3A4108384%3A%3APONE-D-13-49764%3A%3A10.1371%2Fjournal.pone.0103185/categories?version=2020-01-20"},"concepts":[{"bool":"Repair of kidney","id":"C0194158","ontology":"umls","type":"TherapeuticOrPreventiveProcedure","sections":["abstract"]},{"bool":"Proteomics","id":"C0872252","ontology":"umls","type":"BiomedicalOccupationOrDiscipline","sections":["abstract"]},{"bool":"Immunoglobulin G","id":"C0020852","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]}]},{"documentId":"28070858%3A%3A5380712%3A%3A9713%3A%3A10.1007%2Fs12015-016-9713-1","title":"Exosome and Microvesicle-Enriched Fractions Isolated from Mesenchymal Stem Cells by Gradient Separation Showed Different Molecular Signatures and Functions on Renal Tubular Epithelial Cells\n","metadata":{"title":["Exosome and Microvesicle-Enriched Fractions Isolated from Mesenchymal Stem Cells by Gradient Separation Showed Different Molecular Signatures and Functions on Renal Tubular Epithelial Cells\n"]},"corpus":"pubmed","links":{"hrefSearchMatches":"/services/medical_insights/api/v1/corpora/pubmed/documents/28070858%3A%3A5380712%3A%3A9713%3A%3A10.1007%2Fs12015-016-9713-1/search_matches?version=2020-01-20&cuis=C0702151&cuis=C0161849&cuis=C0189537&cuis=C0194158&cuis=C0040679&cuis=C0540301&cuis=C0003440&cuis=C0002191&cuis=C0872252&cuis=C0020861&cuis=C0020852&cuis=C0019067&cuis=C0189919&cuis=C0016016&cuis=C0018595","hrefCategories":"/services/medical_insights/api/v1/corpora/pubmed/documents/28070858%3A%3A5380712%3A%3A9713%3A%3A10.1007%2Fs12015-016-9713-1/categories?version=2020-01-20"},"concepts":[{"bool":"Repair of kidney","id":"C0194158","ontology":"umls","type":"TherapeuticOrPreventiveProcedure","sections":["abstract"]},{"bool":"Proteomics","id":"C0872252","ontology":"umls","type":"BiomedicalOccupationOrDiscipline","sections":["abstract"]},{"bool":"Immunoglobulin G","id":"C0020852","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]}]},{"documentId":"19337364%3A%3A2659445%3A%3A09-PONE-RA-08065R1%3A%3A10.1371%2Fjournal.pone.0005109","title":"Thymosin β4 and β10 Levels in Pre-Term Newborn Oral Cavity and Foetal Salivary Glands Evidence a Switch of Secretion during Foetal Development\n","metadata":{"title":["Thymosin β4 and β10 Levels in Pre-Term Newborn Oral Cavity and Foetal Salivary Glands Evidence a Switch of Secretion during Foetal Development\n"]},"corpus":"pubmed","links":{"hrefSearchMatches":"/services/medical_insights/api/v1/corpora/pubmed/documents/19337364%3A%3A2659445%3A%3A09-PONE-RA-08065R1%3A%3A10.1371%2Fjournal.pone.0005109/search_matches?version=2020-01-20&cuis=C0702151&cuis=C0161849&cuis=C0189537&cuis=C0194158&cuis=C0040679&cuis=C0540301&cuis=C0003440&cuis=C0002191&cuis=C0872252&cuis=C0020861&cuis=C0020852&cuis=C0019067&cuis=C0189919&cuis=C0016016&cuis=C0018595","hrefCategories":"/services/medical_insights/api/v1/corpora/pubmed/documents/19337364%3A%3A2659445%3A%3A09-PONE-RA-08065R1%3A%3A10.1371%2Fjournal.pone.0005109/categories?version=2020-01-20"},"concepts":[{"bool":"Proteomics","id":"C0872252","ontology":"umls","type":"BiomedicalOccupationOrDiscipline","sections":["abstract"]},{"bool":"Immunoglobulin G","id":"C0020852","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]},{"bool":"Repair of heart","id":"C0189919","ontology":"umls","type":"TherapeuticOrPreventiveProcedure","sections":["abstract"]}]},{"documentId":"30203685%3A%3A6180723%3A%3A10.1177%2F0963689718796773%3A%3A10.1177_0963689718796773","title":"Identification of Myocardial Telocytes and Bone Marrow Mesenchymal Stem Cells in Mice\n","metadata":{"title":["Identification of Myocardial Telocytes and Bone Marrow Mesenchymal Stem Cells in Mice\n"]},"corpus":"pubmed","links":{"hrefSearchMatches":"/services/medical_insights/api/v1/corpora/pubmed/documents/30203685%3A%3A6180723%3A%3A10.1177%2F0963689718796773%3A%3A10.1177_0963689718796773/search_matches?version=2020-01-20&cuis=C0702151&cuis=C0161849&cuis=C0189537&cuis=C0194158&cuis=C0040679&cuis=C0540301&cuis=C0003440&cuis=C0002191&cuis=C0872252&cuis=C0020861&cuis=C0020852&cuis=C0019067&cuis=C0189919&cuis=C0016016&cuis=C0018595","hrefCategories":"/services/medical_insights/api/v1/corpora/pubmed/documents/30203685%3A%3A6180723%3A%3A10.1177%2F0963689718796773%3A%3A10.1177_0963689718796773/categories?version=2020-01-20"},"concepts":[{"bool":"Proteomics","id":"C0872252","ontology":"umls","type":"BiomedicalOccupationOrDiscipline","sections":["abstract"]},{"bool":"Immunoglobulin G","id":"C0020852","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]},{"bool":"Repair of heart","id":"C0189919","ontology":"umls","type":"TherapeuticOrPreventiveProcedure","sections":["abstract"]}]},{"documentId":"26174933%3A%3A4547847%3A%3A10.15252%2Fmsb.20156123","title":"Time- and compartment-resolved proteome profiling of the extracellular niche in lung injury and repair\n","metadata":{"title":["Time- and compartment-resolved proteome profiling of the extracellular niche in lung injury and repair\n"]},"corpus":"pubmed","links":{"hrefSearchMatches":"/services/medical_insights/api/v1/corpora/pubmed/documents/26174933%3A%3A4547847%3A%3A10.15252%2Fmsb.20156123/search_matches?version=2020-01-20&cuis=C0702151&cuis=C0161849&cuis=C0189537&cuis=C0194158&cuis=C0040679&cuis=C0540301&cuis=C0003440&cuis=C0002191&cuis=C0872252&cuis=C0020861&cuis=C0020852&cuis=C0019067&cuis=C0189919&cuis=C0016016&cuis=C0018595","hrefCategories":"/services/medical_insights/api/v1/corpora/pubmed/documents/26174933%3A%3A4547847%3A%3A10.15252%2Fmsb.20156123/categories?version=2020-01-20"},"concepts":[{"bool":"Repair of lung","id":"C0189537","ontology":"umls","type":"TherapeuticOrPreventiveProcedure","sections":["abstract"]},{"bool":"Proteomics","id":"C0872252","ontology":"umls","type":"BiomedicalOccupationOrDiscipline","sections":["abstract"]},{"bool":"Immunoglobulin G","id":"C0020852","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]}]},{"documentId":"5603091%3A%3A51%3A%3A10.1186%2Fs11658-017-0051-3","title":"The novel protein C3orf43 accelerates hepatocyte proliferation\n","metadata":{"title":["The novel protein C3orf43 accelerates hepatocyte proliferation\n"]},"corpus":"pubmed","links":{"hrefSearchMatches":"/services/medical_insights/api/v1/corpora/pubmed/documents/5603091%3A%3A51%3A%3A10.1186%2Fs11658-017-0051-3/search_matches?version=2020-01-20&cuis=C0702151&cuis=C0161849&cuis=C0189537&cuis=C0194158&cuis=C0040679&cuis=C0540301&cuis=C0003440&cuis=C0002191&cuis=C0872252&cuis=C0020861&cuis=C0020852&cuis=C0019067&cuis=C0189919&cuis=C0016016&cuis=C0018595","hrefCategories":"/services/medical_insights/api/v1/corpora/pubmed/documents/5603091%3A%3A51%3A%3A10.1186%2Fs11658-017-0051-3/categories?version=2020-01-20"},"concepts":[{"bool":"Repair of liver","id":"C0702151","ontology":"umls","type":"TherapeuticOrPreventiveProcedure","sections":["abstract"]},{"bool":"Proteomics","id":"C0872252","ontology":"umls","type":"BiomedicalOccupationOrDiscipline","sections":["abstract"]},{"bool":"Immunoglobulin G","id":"C0020852","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]}]},{"documentId":"23559005%3A%3A3668631%3A%3Acddis201393%3A%3A10.1038%2Fcddis.2013.93","title":"AF-MSCs fate can be regulated by culture conditions\n","metadata":{"title":["AF-MSCs fate can be regulated by culture conditions\n"]},"corpus":"pubmed","links":{"hrefSearchMatches":"/services/medical_insights/api/v1/corpora/pubmed/documents/23559005%3A%3A3668631%3A%3Acddis201393%3A%3A10.1038%2Fcddis.2013.93/search_matches?version=2020-01-20&cuis=C0702151&cuis=C0161849&cuis=C0189537&cuis=C0194158&cuis=C0040679&cuis=C0540301&cuis=C0003440&cuis=C0002191&cuis=C0872252&cuis=C0020861&cuis=C0020852&cuis=C0019067&cuis=C0189919&cuis=C0016016&cuis=C0018595","hrefCategories":"/services/medical_insights/api/v1/corpora/pubmed/documents/23559005%3A%3A3668631%3A%3Acddis201393%3A%3A10.1038%2Fcddis.2013.93/categories?version=2020-01-20"},"concepts":[{"bool":"Repair of liver","id":"C0702151","ontology":"umls","type":"TherapeuticOrPreventiveProcedure","sections":["abstract"]},{"bool":"Proteomics","id":"C0872252","ontology":"umls","type":"BiomedicalOccupationOrDiscipline","sections":["abstract"]},{"bool":"Immunoglobulin G","id":"C0020852","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]}]},{"documentId":"25349779%3A%3A4208089%3A%3AS2211-5463(14)00076-X%3A%3A10.1016%2Fj.fob.2014.08.002","title":"Identification of nuclear phosphoproteins as novel tobacco markers in mouse lung tissue following short-term exposure to tobacco smoke\n","metadata":{"title":["Identification of nuclear phosphoproteins as novel tobacco markers in mouse lung tissue following short-term exposure to tobacco smoke\n"]},"corpus":"pubmed","links":{"hrefSearchMatches":"/services/medical_insights/api/v1/corpora/pubmed/documents/25349779%3A%3A4208089%3A%3AS2211-5463%2814%2900076-X%3A%3A10.1016%2Fj.fob.2014.08.002/search_matches?version=2020-01-20&cuis=C0702151&cuis=C0161849&cuis=C0189537&cuis=C0194158&cuis=C0040679&cuis=C0540301&cuis=C0003440&cuis=C0002191&cuis=C0872252&cuis=C0020861&cuis=C0020852&cuis=C0019067&cuis=C0189919&cuis=C0016016&cuis=C0018595","hrefCategories":"/services/medical_insights/api/v1/corpora/pubmed/documents/25349779%3A%3A4208089%3A%3AS2211-5463%2814%2900076-X%3A%3A10.1016%2Fj.fob.2014.08.002/categories?version=2020-01-20"},"concepts":[{"bool":"Repair of lung","id":"C0189537","ontology":"umls","type":"TherapeuticOrPreventiveProcedure","sections":["abstract"]},{"bool":"Proteomics","id":"C0872252","ontology":"umls","type":"BiomedicalOccupationOrDiscipline","sections":["abstract"]},{"bool":"Immunoglobulin G","id":"C0020852","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]}]},{"documentId":"25034454%3A%3A4109002%3A%3A10.1038%2Fncomms5387%3A%3ANIHMS605406","title":"Treatment of acute lung injury by targeting MG53-mediated cell membrane repair\n","metadata":{"title":["Treatment of acute lung injury by targeting MG53-mediated cell membrane repair\n"]},"corpus":"pubmed","links":{"hrefSearchMatches":"/services/medical_insights/api/v1/corpora/pubmed/documents/25034454%3A%3A4109002%3A%3A10.1038%2Fncomms5387%3A%3ANIHMS605406/search_matches?version=2020-01-20&cuis=C0702151&cuis=C0161849&cuis=C0189537&cuis=C0194158&cuis=C0040679&cuis=C0540301&cuis=C0003440&cuis=C0002191&cuis=C0872252&cuis=C0020861&cuis=C0020852&cuis=C0019067&cuis=C0189919&cuis=C0016016&cuis=C0018595","hrefCategories":"/services/medical_insights/api/v1/corpora/pubmed/documents/25034454%3A%3A4109002%3A%3A10.1038%2Fncomms5387%3A%3ANIHMS605406/categories?version=2020-01-20"},"concepts":[{"bool":"Repair of lung","id":"C0189537","ontology":"umls","type":"TherapeuticOrPreventiveProcedure","sections":["abstract"]},{"bool":"Proteomics","id":"C0872252","ontology":"umls","type":"BiomedicalOccupationOrDiscipline","sections":["abstract"]},{"bool":"Immunoglobulin G","id":"C0020852","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]}]}]';
    this.documents = JSON.parse(docsexample2.replace(/(\r\n|\n|\r)/gm, ""));
  }

  example1() {
    const example1cuis = ["C0702151", "C0161849", "C0194158", "C0189919", "C0189537", "C0872252", "C0040732", "C0033684"];
    /*for (let index = 0; index < example1cuis.length; index++) {
      this.addConceptExample(example1cuis[index]);
    }
    console.log(JSON.stringify(this.concepts));*/
    this.example1comp = true;
    const conceptsjson = '[{"bool":"Repair of kidney","id":"C0194158","ontology":"umls","type":"TherapeuticOrPreventiveProcedure","sections":["abstract"]},{"bool":"Perfusions","id":"C0031001","ontology":"umls","type":"TherapeuticOrPreventiveProcedure","sections":["abstract"]},{"bool":"Repair of liver","id":"C0702151","ontology":"umls","type":"TherapeuticOrPreventiveProcedure","sections":["abstract"]},{"bool":"Repair of brain","id":"C0161849","ontology":"umls","type":"TherapeuticOrPreventiveProcedure","sections":["abstract"]},{"bool":"Repair of lung","id":"C0189537","ontology":"umls","type":"TherapeuticOrPreventiveProcedure","sections":["abstract"]},{"bool":"Proteomics","id":"C0872252","ontology":"umls","type":"BiomedicalOccupationOrDiscipline","sections":["abstract"]},{"bool":"Repair of heart","id":"C0189919","ontology":"umls","type":"TherapeuticOrPreventiveProcedure","sections":["abstract"]},{"bool":"Transplantation","id":"C0040732","ontology":"umls","type":"TherapeuticOrPreventiveProcedure","sections":["abstract"]},{"bool":"Proteins","id":"C0033684","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]}]';
    this.concepts = JSON.parse(conceptsjson);
    this.adjustedquery = "(Repair of lung OR Repair of liver OR Repair of brain OR Repair of kidney OR Repair of heart) AND Proteomics AND Transplantation AND Proteins AND Perfusions";
    this.iml.query = this.adjustedquery;
    let docsexample1 = '[{"documentId":"27247029%3A%3A4887520%3A%3A31552%3A%3A10.3402%2Fjev.v5.31552","title":"The Fifth International Meeting of ISEV, ISEV2016, Rotterdam, The Netherlands, 4 – 7 May, 2016\n","metadata":{"title":["The Fifth International Meeting of ISEV, ISEV2016, Rotterdam, The Netherlands, 4 – 7 May, 2016\n"]},"corpus":"pubmed","links":{"hrefSearchMatches":"/services/medical_insights/api/v1/corpora/pubmed/documents/27247029%3A%3A4887520%3A%3A31552%3A%3A10.3402%2Fjev.v5.31552/search_matches?version=2020-01-20&cuis=C0194158&cuis=C0031001&cuis=C0702151&cuis=C0161849&cuis=C0189537&cuis=C0872252&cuis=C0189919&cuis=C0040732&cuis=C0033684","hrefCategories":"/services/medical_insights/api/v1/corpora/pubmed/documents/27247029%3A%3A4887520%3A%3A31552%3A%3A10.3402%2Fjev.v5.31552/categories?version=2020-01-20"},"NewPropertyName":"concepts","concepts":[{"bool":"Proteomics","id":"C0872252","ontology":"umls","type":"BiomedicalOccupationOrDiscipline","sections":["abstract"]},{"bool":"Proteins","id":"C0033684","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]},{"bool":"Repair of brain","id":"C0161849","ontology":"umls","type":"TherapeuticOrPreventiveProcedure","sections":["abstract"]},{"bool":"Transplantation","id":"C0040732","ontology":"umls","type":"TherapeuticOrPreventiveProcedure","sections":["abstract"]}]},{"documentId":"24608926%3A%3A3975389%3A%3A10.3390%2Fijms15034142%3A%3Aijms-15-04142","title":"Exosomes Derived from Mesenchymal Stem Cells\n","metadata":{"title":["Exosomes Derived from Mesenchymal Stem Cells\n"]},"corpus":"pubmed","links":{"hrefSearchMatches":"/services/medical_insights/api/v1/corpora/pubmed/documents/24608926%3A%3A3975389%3A%3A10.3390%2Fijms15034142%3A%3Aijms-15-04142/search_matches?version=2020-01-20&cuis=C0194158&cuis=C0031001&cuis=C0702151&cuis=C0161849&cuis=C0189537&cuis=C0872252&cuis=C0189919&cuis=C0040732&cuis=C0033684","hrefCategories":"/services/medical_insights/api/v1/corpora/pubmed/documents/24608926%3A%3A3975389%3A%3A10.3390%2Fijms15034142%3A%3Aijms-15-04142/categories?version=2020-01-20"},"NewPropertyName":"concepts","concepts":[{"bool":"Repair of kidney","id":"C0194158","ontology":"umls","type":"TherapeuticOrPreventiveProcedure","sections":["abstract"]},{"bool":"Proteomics","id":"C0872252","ontology":"umls","type":"BiomedicalOccupationOrDiscipline","sections":["abstract"]},{"bool":"Transplantation","id":"C0040732","ontology":"umls","type":"TherapeuticOrPreventiveProcedure","sections":["abstract"]},{"bool":"Proteins","id":"C0033684","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]}]},{"documentId":"25967741%3A%3A4408443%3A%3A27783%3A%3A10.3402%2Fjev.v4.27783","title":"Abstracts from the Fourth International Meeting of ISEV, ISEV2015, Washington, D.C., USA, 23-26 April 2015\n","metadata":{"title":["Abstracts from the Fourth International Meeting of ISEV, ISEV2015, Washington, D.C., USA, 23-26 April 2015\n"]},"corpus":"pubmed","links":{"hrefSearchMatches":"/services/medical_insights/api/v1/corpora/pubmed/documents/25967741%3A%3A4408443%3A%3A27783%3A%3A10.3402%2Fjev.v4.27783/search_matches?version=2020-01-20&cuis=C0194158&cuis=C0031001&cuis=C0702151&cuis=C0161849&cuis=C0189537&cuis=C0872252&cuis=C0189919&cuis=C0040732&cuis=C0033684","hrefCategories":"/services/medical_insights/api/v1/corpora/pubmed/documents/25967741%3A%3A4408443%3A%3A27783%3A%3A10.3402%2Fjev.v4.27783/categories?version=2020-01-20"},"NewPropertyName":"concepts","concepts":[{"bool":"Repair of kidney","id":"C0194158","ontology":"umls","type":"TherapeuticOrPreventiveProcedure","sections":["abstract"]},{"bool":"Proteomics","id":"C0872252","ontology":"umls","type":"BiomedicalOccupationOrDiscipline","sections":["abstract"]},{"bool":"Transplantation","id":"C0040732","ontology":"umls","type":"TherapeuticOrPreventiveProcedure","sections":["abstract"]},{"bool":"Proteins","id":"C0033684","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]}]},{"documentId":"5451511%3A%3A10.3389%2Ffbioe.2017.00034","title":"Advances in the Knowledge about Kidney Decellularization and Repopulation\n","metadata":{"title":["Advances in the Knowledge about Kidney Decellularization and Repopulation\n"]},"corpus":"pubmed","links":{"hrefSearchMatches":"/services/medical_insights/api/v1/corpora/pubmed/documents/5451511%3A%3A10.3389%2Ffbioe.2017.00034/search_matches?version=2020-01-20&cuis=C0194158&cuis=C0031001&cuis=C0702151&cuis=C0161849&cuis=C0189537&cuis=C0872252&cuis=C0189919&cuis=C0040732&cuis=C0033684","hrefCategories":"/services/medical_insights/api/v1/corpora/pubmed/documents/5451511%3A%3A10.3389%2Ffbioe.2017.00034/categories?version=2020-01-20"},"NewPropertyName":"concepts","concepts":[{"bool":"Repair of kidney","id":"C0194158","ontology":"umls","type":"TherapeuticOrPreventiveProcedure","sections":["abstract"]},{"bool":"Transplantation","id":"C0040732","ontology":"umls","type":"TherapeuticOrPreventiveProcedure","sections":["abstract"]},{"bool":"Proteomics","id":"C0872252","ontology":"umls","type":"BiomedicalOccupationOrDiscipline","sections":["abstract"]},{"bool":"Proteins","id":"C0033684","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]}]},{"documentId":"26077418%3A%3A4001129%3A%3A24214%3A%3A10.3402%2Fjev.v3.24214","title":"Abstracts from the Third International Meeting of ISEV 2014 Rotterdam, The Netherlands, April 30th – May 3rd, 2014\n","metadata":{"title":["Abstracts from the Third International Meeting of ISEV 2014 Rotterdam, The Netherlands, April 30th – May 3rd, 2014\n"]},"corpus":"pubmed","links":{"hrefSearchMatches":"/services/medical_insights/api/v1/corpora/pubmed/documents/26077418%3A%3A4001129%3A%3A24214%3A%3A10.3402%2Fjev.v3.24214/search_matches?version=2020-01-20&cuis=C0194158&cuis=C0031001&cuis=C0702151&cuis=C0161849&cuis=C0189537&cuis=C0872252&cuis=C0189919&cuis=C0040732&cuis=C0033684","hrefCategories":"/services/medical_insights/api/v1/corpora/pubmed/documents/26077418%3A%3A4001129%3A%3A24214%3A%3A10.3402%2Fjev.v3.24214/categories?version=2020-01-20"},"NewPropertyName":"concepts","concepts":[{"bool":"Repair of kidney","id":"C0194158","ontology":"umls","type":"TherapeuticOrPreventiveProcedure","sections":["abstract"]},{"bool":"Proteomics","id":"C0872252","ontology":"umls","type":"BiomedicalOccupationOrDiscipline","sections":["abstract"]},{"bool":"Transplantation","id":"C0040732","ontology":"umls","type":"TherapeuticOrPreventiveProcedure","sections":["abstract"]},{"bool":"Proteins","id":"C0033684","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]}]},{"documentId":"5123388%3A%3A76%3A%3A10.1186%2Fs40349-016-0076-5","title":"5th International Symposium on Focused Ultrasound\n","metadata":{"title":["5th International Symposium on Focused Ultrasound\n"]},"corpus":"pubmed","links":{"hrefSearchMatches":"/services/medical_insights/api/v1/corpora/pubmed/documents/5123388%3A%3A76%3A%3A10.1186%2Fs40349-016-0076-5/search_matches?version=2020-01-20&cuis=C0194158&cuis=C0031001&cuis=C0702151&cuis=C0161849&cuis=C0189537&cuis=C0872252&cuis=C0189919&cuis=C0040732&cuis=C0033684","hrefCategories":"/services/medical_insights/api/v1/corpora/pubmed/documents/5123388%3A%3A76%3A%3A10.1186%2Fs40349-016-0076-5/categories?version=2020-01-20"},"NewPropertyName":"concepts","concepts":[{"bool":"Repair of heart","id":"C0189919","ontology":"umls","type":"TherapeuticOrPreventiveProcedure","sections":["abstract"]},{"bool":"Proteomics","id":"C0872252","ontology":"umls","type":"BiomedicalOccupationOrDiscipline","sections":["abstract"]},{"bool":"Proteins","id":"C0033684","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]},{"bool":"Transplantation","id":"C0040732","ontology":"umls","type":"TherapeuticOrPreventiveProcedure","sections":["abstract"]}]},{"documentId":"5637785%3A%3A1310414%3A%3A10.1080%2F20013078.2017.1310414","title":"Abstract Book: ISEV2017\n","metadata":{"title":["Abstract Book: ISEV2017\n"]},"corpus":"pubmed","links":{"hrefSearchMatches":"/services/medical_insights/api/v1/corpora/pubmed/documents/5637785%3A%3A1310414%3A%3A10.1080%2F20013078.2017.1310414/search_matches?version=2020-01-20&cuis=C0194158&cuis=C0031001&cuis=C0702151&cuis=C0161849&cuis=C0189537&cuis=C0872252&cuis=C0189919&cuis=C0040732&cuis=C0033684","hrefCategories":"/services/medical_insights/api/v1/corpora/pubmed/documents/5637785%3A%3A1310414%3A%3A10.1080%2F20013078.2017.1310414/categories?version=2020-01-20"},"NewPropertyName":"concepts","concepts":[{"bool":"Proteomics","id":"C0872252","ontology":"umls","type":"BiomedicalOccupationOrDiscipline","sections":["abstract"]},{"bool":"Transplantation","id":"C0040732","ontology":"umls","type":"TherapeuticOrPreventiveProcedure","sections":["abstract"]},{"bool":"Proteins","id":"C0033684","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]}]},{"documentId":"21818551%3A%3A3173650%3A%3A783%3A%3A10.1007%2Fs00018-011-0783-6","title":"Advances in tenascin-C biology\n","metadata":{"title":["Advances in tenascin-C biology\n"]},"corpus":"pubmed","links":{"hrefSearchMatches":"/services/medical_insights/api/v1/corpora/pubmed/documents/21818551%3A%3A3173650%3A%3A783%3A%3A10.1007%2Fs00018-011-0783-6/search_matches?version=2020-01-20&cuis=C0194158&cuis=C0031001&cuis=C0702151&cuis=C0161849&cuis=C0189537&cuis=C0872252&cuis=C0189919&cuis=C0040732&cuis=C0033684","hrefCategories":"/services/medical_insights/api/v1/corpora/pubmed/documents/21818551%3A%3A3173650%3A%3A783%3A%3A10.1007%2Fs00018-011-0783-6/categories?version=2020-01-20"},"NewPropertyName":"concepts","concepts":[{"bool":"Proteomics","id":"C0872252","ontology":"umls","type":"BiomedicalOccupationOrDiscipline","sections":["abstract"]},{"bool":"Proteins","id":"C0033684","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]},{"bool":"Transplantation","id":"C0040732","ontology":"umls","type":"TherapeuticOrPreventiveProcedure","sections":["abstract"]}]},{"documentId":"5323391%3A%3A10.3389%2Ffcvm.2017.00007","title":"New Delivery Systems of Stem Cells for Vascular Regeneration in Ischemia\n","metadata":{"title":["New Delivery Systems of Stem Cells for Vascular Regeneration in Ischemia\n"]},"corpus":"pubmed","links":{"hrefSearchMatches":"/services/medical_insights/api/v1/corpora/pubmed/documents/5323391%3A%3A10.3389%2Ffcvm.2017.00007/search_matches?version=2020-01-20&cuis=C0194158&cuis=C0031001&cuis=C0702151&cuis=C0161849&cuis=C0189537&cuis=C0872252&cuis=C0189919&cuis=C0040732&cuis=C0033684","hrefCategories":"/services/medical_insights/api/v1/corpora/pubmed/documents/5323391%3A%3A10.3389%2Ffcvm.2017.00007/categories?version=2020-01-20"},"NewPropertyName":"concepts","concepts":[{"bool":"Proteomics","id":"C0872252","ontology":"umls","type":"BiomedicalOccupationOrDiscipline","sections":["abstract"]},{"bool":"Repair of heart","id":"C0189919","ontology":"umls","type":"TherapeuticOrPreventiveProcedure","sections":["abstract"]},{"bool":"Proteins","id":"C0033684","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]},{"bool":"Transplantation","id":"C0040732","ontology":"umls","type":"TherapeuticOrPreventiveProcedure","sections":["abstract"]}]},{"documentId":"2798987%3A%3A1239%3A%3A10.1007%2Fs00134-008-1239-9","title":"21st ESICM Annual Congress\n","metadata":{"title":["21st ESICM Annual Congress\n"]},"corpus":"pubmed","links":{"hrefSearchMatches":"/services/medical_insights/api/v1/corpora/pubmed/documents/2798987%3A%3A1239%3A%3A10.1007%2Fs00134-008-1239-9/search_matches?version=2020-01-20&cuis=C0194158&cuis=C0031001&cuis=C0702151&cuis=C0161849&cuis=C0189537&cuis=C0872252&cuis=C0189919&cuis=C0040732&cuis=C0033684","hrefCategories":"/services/medical_insights/api/v1/corpora/pubmed/documents/2798987%3A%3A1239%3A%3A10.1007%2Fs00134-008-1239-9/categories?version=2020-01-20"},"NewPropertyName":"concepts","concepts":[{"bool":"Repair of lung","id":"C0189537","ontology":"umls","type":"TherapeuticOrPreventiveProcedure","sections":["abstract"]},{"bool":"Transplantation","id":"C0040732","ontology":"umls","type":"TherapeuticOrPreventiveProcedure","sections":["abstract"]},{"bool":"Proteomics","id":"C0872252","ontology":"umls","type":"BiomedicalOccupationOrDiscipline","sections":["abstract"]},{"bool":"Proteins","id":"C0033684","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]}]},{"documentId":"21357760%3A%3A3046086%3A%3A10.1242%2Fdmm.006213%3A%3A0040145","title":"Human models of acute lung injury\n","metadata":{"title":["Human models of acute lung injury\n"]},"corpus":"pubmed","links":{"hrefSearchMatches":"/services/medical_insights/api/v1/corpora/pubmed/documents/21357760%3A%3A3046086%3A%3A10.1242%2Fdmm.006213%3A%3A0040145/search_matches?version=2020-01-20&cuis=C0194158&cuis=C0031001&cuis=C0702151&cuis=C0161849&cuis=C0189537&cuis=C0872252&cuis=C0189919&cuis=C0040732&cuis=C0033684","hrefCategories":"/services/medical_insights/api/v1/corpora/pubmed/documents/21357760%3A%3A3046086%3A%3A10.1242%2Fdmm.006213%3A%3A0040145/categories?version=2020-01-20"},"NewPropertyName":"concepts","concepts":[{"bool":"Repair of lung","id":"C0189537","ontology":"umls","type":"TherapeuticOrPreventiveProcedure","sections":["abstract"]},{"bool":"Proteomics","id":"C0872252","ontology":"umls","type":"BiomedicalOccupationOrDiscipline","sections":["abstract"]},{"bool":"Transplantation","id":"C0040732","ontology":"umls","type":"TherapeuticOrPreventiveProcedure","sections":["abstract"]},{"bool":"Proteins","id":"C0033684","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]}]},{"documentId":"5622197%3A%3A10.3389%2Ffphar.2017.00661","title":"Purinergic Signalling: Therapeutic Developments\n","metadata":{"title":["Purinergic Signalling: Therapeutic Developments\n"]},"corpus":"pubmed","links":{"hrefSearchMatches":"/services/medical_insights/api/v1/corpora/pubmed/documents/5622197%3A%3A10.3389%2Ffphar.2017.00661/search_matches?version=2020-01-20&cuis=C0194158&cuis=C0031001&cuis=C0702151&cuis=C0161849&cuis=C0189537&cuis=C0872252&cuis=C0189919&cuis=C0040732&cuis=C0033684","hrefCategories":"/services/medical_insights/api/v1/corpora/pubmed/documents/5622197%3A%3A10.3389%2Ffphar.2017.00661/categories?version=2020-01-20"},"NewPropertyName":"concepts","concepts":[{"bool":"Repair of liver","id":"C0702151","ontology":"umls","type":"TherapeuticOrPreventiveProcedure","sections":["abstract"]},{"bool":"Proteomics","id":"C0872252","ontology":"umls","type":"BiomedicalOccupationOrDiscipline","sections":["abstract"]},{"bool":"Transplantation","id":"C0040732","ontology":"umls","type":"TherapeuticOrPreventiveProcedure","sections":["abstract"]},{"bool":"Proteins","id":"C0033684","ontology":"umls","type":"AminoAcidPeptideOrProtein","sections":["abstract"]}]}]'
    this.documents = JSON.parse(docsexample1.replace(/(\r\n|\n|\r)/gm, ""));
  }
  getDocs(adjustedquery, concepts) {
    console.log(JSON.stringify(this.concepts));
    this.completed = true;
    if (this.example1comp === false && this.example2comp === false) {
      this.iml.getDocs(this.adjustedquery, this.concepts).subscribe((data: any) => {
        this.documents = [];
        console.log(data);
        this.documents = data.documents;
        this.iml.docsJSON = data.documents;
        for (let index = 0; index < this.documents.length; index++) {
          this.documents[index].concepts = [];
          let id;
          console.log(index + 1, "." , this.documents[index].title)
          id = this.documents[index].documentId.replace(/\:/g, '\%3A');
          id = id.replace(/\//g, '\%2F');
          this.documents[index].documentId = id;
          let cuiList = [];
          this.concepts.forEach(element => {
            cuiList.push(element.id);
          });

          this.iml.checkConcepts(id, this.documents[index].corpus, cuiList).subscribe((data: any) => {
              for (let index1 = 0; index1 < this.concepts.length; index1++) {
                if (data.passages.hasOwnProperty(this.concepts[index1].bool)) {
                  this.documents[index].concepts.push(this.concepts[index1]);
                  console.log(JSON.stringify(this.documents));
              }
            }
          });
        }
      });
    } else {
      this.iml.docsJSON = this.documents;
    }
  }
  typeahead(concept: string) {
    this.iml.getTypeahead(concept).subscribe((data: any) => {
      this.searching = true;
      this.relatedConcepts = data;
    });
  }
  goToDoc(id: string, concepts){
    console.log(concepts);
    let conceptQuery = "";
    for (let index = 0; index < concepts.length; index++) {
      if (index === 0) {
        conceptQuery = conceptQuery + "cui:" + concepts[index].id;
      } else {
        conceptQuery = conceptQuery + ",cui:" + concepts[index].id;
      }
    }
    console.log(conceptQuery);
    let url = `https://watsonpow01.rch.stglabs.ibm.com/services/medical_insights/application/medical_insights/dist/annotation_viewer/annotationViewer.html?corpora=ctgov:10,medline:10,pubmed:10&document_id=${id}&query=${conceptQuery}`
    window.open(url, '_blank');
  }
  addConcept(cui: string) {
    this.searching = false;
    this.iml.getConceptGeneralInfo(cui).subscribe((data: any) => {
      const conceptjson = 
      // tslint:disable-next-line: object-literal-key-quotes
      { "bool" : data.preferredName,
      // tslint:disable-next-line: object-literal-key-quotes
      "id" : data.cui,
      // tslint:disable-next-line: object-literal-key-quotes
      "ontology" : data.ontology,
      // tslint:disable-next-line: object-literal-key-quotes
      "type" : data.semanticTypes[0]
      };
      conceptjson.bool = conceptjson.bool.replace(/\(/g, "\\(");
      conceptjson.bool = conceptjson.bool.replace(/\)/g, "\\)");
      this.concepts.push(conceptjson);
      if (this.concepts.length === 1) {
          this.finalquery = this.finalquery + conceptjson.bool;
        } else { this.finalquery = this.finalquery + " AND " + data.preferredName; }
      this.adjustedquery = this.finalquery;
      this.iml.query = this.adjustedquery;
    });
  }
  addConceptExample(cui: string) {
    this.searching = false;
    this.iml.getConceptGeneralInfo(cui).subscribe((data: any) => {
      const conceptjson = 
      // tslint:disable-next-line: object-literal-key-quotes
      { "bool" : data.preferredName,
      // tslint:disable-next-line: object-literal-key-quotes
      "id" : data.cui,
      // tslint:disable-next-line: object-literal-key-quotes
      "ontology" : data.ontology,
      // tslint:disable-next-line: object-literal-key-quotes
      "type" : data.semanticTypes[0],
      // tslint:disable-next-line: object-literal-key-quotes
      "sections": [
        "abstract"
      ]
      };
      conceptjson.bool = conceptjson.bool.replace(/\(/g, "\\(");
      conceptjson.bool = conceptjson.bool.replace(/\)/g, "\\)");
      this.concepts.push(conceptjson);
      if (this.concepts.length === 1) {
          this.finalquery = this.finalquery + conceptjson.bool;
        } else { this.finalquery = this.finalquery + " AND " + data.preferredName; }
    });
  }
  returnIcon(type: string) {
    if (type === 'PharmacologicSubstance' || type === 'OrganicChemical') {
      return 'flask';
    }
    if (type === 'BodyPartOrganOrOrganComponent') {
      return 'heart';
    }
    if (type === 'AminoAcidPeptideOrProtein') {
      return 'dna';
    }
    if (type === 'TherapeuticOrPreventiveProcedure') {
      return 'user-md';
    }
    if (type === 'BiomedicalOccupationOrDiscipline') {
      return 'book-medical';
    }
    if (type === 'DiseaseOrSyndrome' || type === 'CellOrMolecularDysfunction') {
      return 'stethoscope';
    } else {
      return 'question-circle';
    }
  }
  returnColor(type: string) {
    if (type === 'PharmacologicSubstance' || type === 'OrganicChemical') {
      return 'brown';
    }
    if (type === 'BodyPartOrganOrOrganComponent') {
      return 'darkred';
    }
    if (type === 'AminoAcidPeptideOrProtein') {
      return 'darkorange';
    }
    if (type === 'TherapeuticOrPreventiveProcedure') {
      return 'darkslateblue';
    }
    if (type === 'BiomedicalOccupationOrDiscipline') {
      return 'deeppink';
    }
    if (type === 'DiseaseOrSyndrome' || type === 'CellOrMolecularDysfunction') {
      return 'forestgreen';
    } else {
      return 'black';
    }
  }
}
